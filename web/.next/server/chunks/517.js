"use strict";exports.id=517,exports.ids=[517],exports.modules={1323:(e,s)=>{Object.defineProperty(s,"l",{enumerable:!0,get:function(){return function e(s,t){return t in s?s[t]:"then"in s&&"function"==typeof s.then?s.then(s=>e(s,t)):"function"==typeof s&&"default"===t?s:void 0}}})},5710:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.d(s,{Z:()=>o});var n=t(997),i=t(6689),l=t(3514),r=t(1664),d=t.n(r),c=e([l]);function o(){let e=(0,l.a)(e=>e.user),s=(0,l.a)(e=>e.logout),[t,a]=(0,i.useState)(!1),r=(0,i.useRef)(null);return n.jsx("div",{className:"flex items-center justify-end px-4 py-2 bg-slate-900 border-b border-slate-800",children:(0,n.jsxs)("div",{className:"relative",ref:r,children:[(0,n.jsxs)("button",{onClick:()=>a(e=>!e),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700",children:[n.jsx("img",{src:e?.profileImage||"/default-avatar.png",alt:"avatar",className:"w-8 h-8 rounded-full object-cover border border-slate-700"}),n.jsx("span",{className:"text-sm font-medium hidden sm:inline-block",children:e?.name||"Admin"}),n.jsx("span",{className:"text-xs opacity-70",children:"▾"})]}),t&&(0,n.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow border p-2 z-50",children:[n.jsx("div",{className:"px-2 py-1 text-xs text-slate-500",children:"Account"}),(0,n.jsxs)(d(),{href:"/admin/setup",className:"flex items-center gap-2 px-2 py-2 rounded hover:bg-slate-100 text-sm",children:[n.jsx("span",{children:"⚙️"})," ",n.jsx("span",{children:"Setup"})]}),(0,n.jsxs)("button",{onClick:()=>{s()},className:"flex w-full text-left items-center gap-2 px-2 py-2 rounded hover:bg-slate-100 text-sm",children:[n.jsx("span",{children:"\uD83D\uDEAA"})," ",n.jsx("span",{children:"Logout"})]})]})]})})}l=(c.then?(await c)():c)[0],a()}catch(e){a(e)}})},7073:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.d(s,{Z:()=>u});var n=t(997),i=t(6689),l=t(1664),r=t.n(l),d=t(1163),c=t(5111),o=t(6197),x=e([c,o]);[c,o]=x.then?(await x)():x;let p=()=>({collapsed:!1,open:{}});function m({open:e}){return n.jsx(o.motion.span,{animate:{rotate:e?90:0},transition:{duration:.2},className:"inline-block",children:"▸"})}function h({node:e,depth:s=0,activePath:t,openMap:a,toggle:i,collapsed:l}){let d=!e.submenus||0===e.submenus.length,c=`sub:${e._id}`,x=!!a[c],u=!!(t&&e.path&&t.startsWith(e.path)),p=(0,n.jsxs)("div",{className:`flex items-center gap-2 px-3 py-2 rounded-xl transition-all duration-300 ease-in-out ${u?"bg-slate-700 text-white":"text-slate-200 hover:bg-slate-800/80"}`,onClick:()=>!d&&i(c),children:[!d&&n.jsx(m,{open:x}),!l&&n.jsx("span",{className:"text-sm font-medium truncate",children:e.name})]});return d?n.jsx(r(),{href:e.path||"#",title:l?e.name:void 0,className:"block",children:p}):(0,n.jsxs)("div",{children:[n.jsx("button",{title:l?e.name:void 0,className:"w-full text-left",children:p}),n.jsx(o.AnimatePresence,{initial:!1,children:x&&!l&&n.jsx(o.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25},className:"ml-3 pl-2 border-l border-slate-700 space-y-1",children:(e.submenus||[]).map(e=>n.jsx(h,{node:e,depth:s+1,activePath:t,openMap:a,toggle:i,collapsed:l},e._id))},"content")})]})}function u(){let[e,s]=(0,i.useState)([]),[{collapsed:t,open:a},l]=(0,i.useState)(p),r=(0,d.useRouter)().asPath,c=(0,i.useMemo)(()=>e,[e]),x=e=>l(s=>({...s,open:{...s.open,[e]:!s.open[e]}})),u=e=>x(`main:${e}`);return(0,n.jsxs)("aside",{className:`${t?"w-16":"w-64"} sticky top-0 self-start h-screen overflow-y-auto bg-slate-900 border-r border-slate-800 p-2 transition-all duration-300`,children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-2 mb-2",children:[!t&&n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Menu"}),n.jsx("button",{className:"text-slate-300 hover:text-white hover:bg-slate-800 rounded-lg p-1 transition-colors",onClick:()=>l(e=>({...e,collapsed:!e.collapsed})),title:t?"Expand sidebar":"Collapse sidebar",children:t?"\xbb":"\xab"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[c.map(e=>{let s=!!a[`main:${e._id}`],i=(e.icon?.[0]||e.name?.[0]||"•").toUpperCase();return(0,n.jsxs)("div",{children:[(0,n.jsxs)("button",{className:`w-full flex items-center gap-3 px-3 py-2 rounded-xl text-left transition-all duration-300 ease-in-out ${s?"bg-slate-800 text-white":"text-slate-200 hover:bg-slate-800/60"}`,onClick:()=>u(e._id),title:t?e.name:void 0,children:[n.jsx("div",{className:"w-7 h-7 rounded-md bg-slate-800/80 text-slate-200 grid place-items-center text-sm",children:i}),!t&&n.jsx("div",{className:"font-semibold text-sm truncate flex-1",children:e.name}),!t&&n.jsx(m,{open:s})]}),n.jsx(o.AnimatePresence,{initial:!1,children:s&&!t&&n.jsx(o.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25},className:"mt-1 ml-2 space-y-1",children:(e.submenus||[]).map(e=>n.jsx(h,{node:e,activePath:r,openMap:a,toggle:x,collapsed:t},e._id))})})]},e._id)}),0===c.length&&n.jsx("div",{className:"px-3 py-2 text-xs text-slate-400",children:"Loading menus..."})]})]})}a()}catch(e){a(e)}})},2075:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>u});var n=t(997),i=t(6689),l=t(1163),r=t(7073),d=t(5710),c=t(6501),o=t(3514),x=e([r,d,c,o]);function m({data:e}){let s=Math.max(1,...e.map(e=>e.total));return n.jsx("div",{className:"h-40 flex items-end gap-1",children:e.map(e=>n.jsx("div",{className:"flex-1 bg-blue-200",style:{height:`${e.total/s*100}%`},title:`Day ${e.day}: ${e.total}`},e.day))})}function h({data:e}){let s=Object.entries(e),t=s.reduce((e,[,s])=>e+s,0);if(!t)return n.jsx("div",{className:"text-sm text-gray-500",children:"No data"});let a=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#6366f1"];return n.jsx("div",{children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-100 relative",style:{background:`conic-gradient(${s.map(([e,s],n)=>`${a[n%a.length]} ${s/t*100}%`).join(",")})`}}),n.jsx("div",{className:"text-sm space-y-1",children:s.map(([e,s],t)=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-3 h-3 inline-block rounded-sm",style:{background:a[t%a.length]}})," ",e,": ",s]},e))})]})})}function u(){let[e,s]=(0,i.useState)(null),[t,a]=(0,i.useState)(!0);return((0,l.useRouter)(),(0,o.a)(e=>e.user),t)?n.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:"Loading..."}):(0,n.jsxs)("div",{className:"min-h-[70vh] flex",children:[n.jsx(r.Z,{}),(0,n.jsxs)("main",{className:"flex-1",children:[n.jsx(d.Z,{}),(0,n.jsxs)("div",{className:"p-4 space-y-4",children:[n.jsx("h1",{className:"text-2xl font-semibold",children:"Admin Dashboard"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,n.jsxs)("div",{className:"p-4 border rounded bg-white",children:[n.jsx("div",{className:"text-gray-500 text-sm",children:"Today's Orders"}),n.jsx("div",{className:"text-2xl font-bold",children:e?.cards?.todayOrders??"-"})]}),(0,n.jsxs)("div",{className:"p-4 border rounded bg-white",children:[n.jsx("div",{className:"text-gray-500 text-sm",children:"This Week Orders"}),n.jsx("div",{className:"text-2xl font-bold",children:e?.cards?.weekOrders??"-"})]}),(0,n.jsxs)("div",{className:"p-4 border rounded bg-white",children:[n.jsx("div",{className:"text-gray-500 text-sm",children:"This Month Orders"}),n.jsx("div",{className:"text-2xl font-bold",children:e?.cards?.monthOrders??"-"})]}),(0,n.jsxs)("div",{className:"p-4 border rounded bg-white",children:[n.jsx("div",{className:"text-gray-500 text-sm",children:"Low Stock Products"}),n.jsx("div",{className:"text-2xl font-bold",children:e?.cards?.lowStock??"-"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"border rounded bg-white p-4 lg:col-span-2",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Sales by Day (This Month)"}),e?n.jsx(m,{data:e.charts.salesByDay}):n.jsx("div",{className:"h-40 bg-gray-50 rounded"})]}),(0,n.jsxs)("div",{className:"border rounded bg-white p-4",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Orders by Status"}),e?n.jsx(h,{data:e.charts.ordersByStatus}):n.jsx("div",{className:"h-40 bg-gray-50 rounded"})]})]})]})]})]})}[r,d,c,o]=x.then?(await x)():x,a()}catch(e){a(e)}})},6501:(e,s,t)=>{t.a(e,async(e,s)=>{try{var a=t(1391),n=e([a]);a=(n.then?(await n)():n)[0],s()}catch(e){s(e)}})},5111:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.d(s,{Dr:()=>r,Ft:()=>l,Hz:()=>d,Io:()=>x,bA:()=>m,h3:()=>h,rq:()=>c,wC:()=>o});var n=t(1391),i=e([n]);n=(i.then?(await i)():i)[0];let l=async e=>{let{data:s}=await n.ZP.get("/main-menus",{params:e});return s},r=async e=>{let{data:s}=await n.ZP.get("/sub-menus",{params:e});return s},d=e=>n.ZP.post("/main-menus",e),c=(e,s)=>n.ZP.put(`/main-menus/${e}`,s),o=e=>n.ZP.delete(`/main-menus/${e}`),x=e=>n.ZP.post("/sub-menus",e),m=(e,s)=>n.ZP.put(`/sub-menus/${e}`,s),h=e=>n.ZP.delete(`/sub-menus/${e}`);a()}catch(e){a(e)}})},5244:(e,s)=>{var t;Object.defineProperty(s,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))}};