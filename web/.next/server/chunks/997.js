exports.id=997,exports.ids=[997],exports.modules={5710:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(s,{Z:()=>o});var n=t(997),l=t(6689),i=t(3514),r=t(1664),d=t.n(r),c=e([i]);function o(){let e=(0,i.a)(e=>e.user),s=(0,i.a)(e=>e.logout),[t,a]=(0,l.useState)(!1),r=(0,l.useRef)(null);return n.jsx("div",{className:"flex items-center justify-end px-4 py-2 bg-slate-900 border-b border-slate-800",children:(0,n.jsxs)("div",{className:"relative",ref:r,children:[(0,n.jsxs)("button",{onClick:()=>a(e=>!e),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700",children:[n.jsx("img",{src:e?.profileImage||"/default-avatar.png",alt:"avatar",className:"w-8 h-8 rounded-full object-cover border border-slate-700"}),n.jsx("span",{className:"text-sm font-medium hidden sm:inline-block",children:e?.name||"Admin"}),n.jsx("span",{className:"text-xs opacity-70",children:"▾"})]}),t&&(0,n.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow border p-2 z-50",children:[n.jsx("div",{className:"px-2 py-1 text-xs text-slate-500",children:"Account"}),(0,n.jsxs)(d(),{href:"/admin/setup",className:"flex items-center gap-2 px-2 py-2 rounded hover:bg-slate-100 text-sm",children:[n.jsx("span",{children:"⚙️"})," ",n.jsx("span",{children:"Setup"})]}),(0,n.jsxs)("button",{onClick:()=>{s()},className:"flex w-full text-left items-center gap-2 px-2 py-2 rounded hover:bg-slate-100 text-sm",children:[n.jsx("span",{children:"\uD83D\uDEAA"})," ",n.jsx("span",{children:"Logout"})]})]})]})})}i=(c.then?(await c)():c)[0],a()}catch(e){a(e)}})},7073:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(s,{Z:()=>u});var n=t(997),l=t(6689),i=t(1664),r=t.n(i),d=t(1163),c=t(5111),o=t(6197),m=e([c,o]);[c,o]=m.then?(await m)():m;let p=()=>({collapsed:!1,open:{}});function x({open:e}){return n.jsx(o.motion.span,{animate:{rotate:e?90:0},transition:{duration:.2},className:"inline-block",children:"▸"})}function h({node:e,depth:s=0,activePath:t,openMap:a,toggle:l,collapsed:i}){let d=!e.submenus||0===e.submenus.length,c=`sub:${e._id}`,m=!!a[c],u=!!(t&&e.path&&t.startsWith(e.path)),p=(0,n.jsxs)("div",{className:`flex items-center gap-2 px-3 py-2 rounded-xl transition-all duration-300 ease-in-out ${u?"bg-slate-700 text-white":"text-slate-200 hover:bg-slate-800/80"}`,onClick:()=>!d&&l(c),children:[!d&&n.jsx(x,{open:m}),!i&&n.jsx("span",{className:"text-sm font-medium truncate",children:e.name})]});return d?n.jsx(r(),{href:e.path||"#",title:i?e.name:void 0,className:"block",children:p}):(0,n.jsxs)("div",{children:[n.jsx("button",{title:i?e.name:void 0,className:"w-full text-left",children:p}),n.jsx(o.AnimatePresence,{initial:!1,children:m&&!i&&n.jsx(o.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25},className:"ml-3 pl-2 border-l border-slate-700 space-y-1",children:(e.submenus||[]).map(e=>n.jsx(h,{node:e,depth:s+1,activePath:t,openMap:a,toggle:l,collapsed:i},e._id))},"content")})]})}function u(){let[e,s]=(0,l.useState)([]),[{collapsed:t,open:a},i]=(0,l.useState)(p),r=(0,d.useRouter)().asPath,c=(0,l.useMemo)(()=>e,[e]),m=e=>i(s=>({...s,open:{...s.open,[e]:!s.open[e]}})),u=e=>m(`main:${e}`);return(0,n.jsxs)("aside",{className:`${t?"w-16":"w-64"} sticky top-0 self-start h-screen overflow-y-auto bg-slate-900 border-r border-slate-800 p-2 transition-all duration-300`,children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-2 mb-2",children:[!t&&n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Menu"}),n.jsx("button",{className:"text-slate-300 hover:text-white hover:bg-slate-800 rounded-lg p-1 transition-colors",onClick:()=>i(e=>({...e,collapsed:!e.collapsed})),title:t?"Expand sidebar":"Collapse sidebar",children:t?"\xbb":"\xab"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[c.map(e=>{let s=!!a[`main:${e._id}`],l=(e.icon?.[0]||e.name?.[0]||"•").toUpperCase();return(0,n.jsxs)("div",{children:[(0,n.jsxs)("button",{className:`w-full flex items-center gap-3 px-3 py-2 rounded-xl text-left transition-all duration-300 ease-in-out ${s?"bg-slate-800 text-white":"text-slate-200 hover:bg-slate-800/60"}`,onClick:()=>u(e._id),title:t?e.name:void 0,children:[n.jsx("div",{className:"w-7 h-7 rounded-md bg-slate-800/80 text-slate-200 grid place-items-center text-sm",children:l}),!t&&n.jsx("div",{className:"font-semibold text-sm truncate flex-1",children:e.name}),!t&&n.jsx(x,{open:s})]}),n.jsx(o.AnimatePresence,{initial:!1,children:s&&!t&&n.jsx(o.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25},className:"mt-1 ml-2 space-y-1",children:(e.submenus||[]).map(e=>n.jsx(h,{node:e,activePath:r,openMap:a,toggle:m,collapsed:t},e._id))})})]},e._id)}),0===c.length&&n.jsx("div",{className:"px-3 py-2 text-xs text-slate-400",children:"Loading menus..."})]})]})}a()}catch(e){a(e)}})},3414:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>c});var n=t(997);t(6764);var l=t(1163);t(6689);var i=t(3514),r=t(1391),d=e([i,r]);function c({Component:e,pageProps:s}){let t=(0,l.useRouter)();return(0,i.a)(e=>e.setUser),t.pathname.startsWith("/admin"),n.jsx("main",{className:"min-h-screen",children:n.jsx(e,{...s})})}[i,r]=d.then?(await d)():d,a()}catch(e){a(e)}})},2075:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>u});var n=t(997),l=t(6689),i=t(1163),r=t(7073),d=t(5710),c=t(6501),o=t(3514),m=e([r,d,c,o]);function x({data:e}){let s=Math.max(1,...e.map(e=>e.total));return n.jsx("div",{className:"h-40 flex items-end gap-1",children:e.map(e=>n.jsx("div",{className:"flex-1 bg-blue-200",style:{height:`${e.total/s*100}%`},title:`Day ${e.day}: ${e.total}`},e.day))})}function h({data:e}){let s=Object.entries(e),t=s.reduce((e,[,s])=>e+s,0);if(!t)return n.jsx("div",{className:"text-sm text-gray-500",children:"No data"});let a=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#6366f1"];return n.jsx("div",{children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-100 relative",style:{background:`conic-gradient(${s.map(([e,s],n)=>`${a[n%a.length]} ${s/t*100}%`).join(",")})`}}),n.jsx("div",{className:"text-sm space-y-1",children:s.map(([e,s],t)=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-3 h-3 inline-block rounded-sm",style:{background:a[t%a.length]}})," ",e,": ",s]},e))})]})})}function u(){let[e,s]=(0,l.useState)(null),[t,a]=(0,l.useState)(!0);return((0,i.useRouter)(),(0,o.a)(e=>e.user),t)?n.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:"Loading..."}):(0,n.jsxs)("div",{className:"min-h-[70vh] flex",children:[n.jsx(r.Z,{}),(0,n.jsxs)("main",{className:"flex-1",children:[n.jsx(d.Z,{}),(0,n.jsxs)("div",{className:"p-4 space-y-4",children:[n.jsx("h1",{className:"text-2xl font-semibold",children:"Admin Dashboard"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,n.jsxs)("div",{className:"p-4 border rounded bg-white",children:[n.jsx("div",{className:"text-gray-500 text-sm",children:"Today's Orders"}),n.jsx("div",{className:"text-2xl font-bold",children:e?.cards?.todayOrders??"-"})]}),(0,n.jsxs)("div",{className:"p-4 border rounded bg-white",children:[n.jsx("div",{className:"text-gray-500 text-sm",children:"This Week Orders"}),n.jsx("div",{className:"text-2xl font-bold",children:e?.cards?.weekOrders??"-"})]}),(0,n.jsxs)("div",{className:"p-4 border rounded bg-white",children:[n.jsx("div",{className:"text-gray-500 text-sm",children:"This Month Orders"}),n.jsx("div",{className:"text-2xl font-bold",children:e?.cards?.monthOrders??"-"})]}),(0,n.jsxs)("div",{className:"p-4 border rounded bg-white",children:[n.jsx("div",{className:"text-gray-500 text-sm",children:"Low Stock Products"}),n.jsx("div",{className:"text-2xl font-bold",children:e?.cards?.lowStock??"-"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"border rounded bg-white p-4 lg:col-span-2",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Sales by Day (This Month)"}),e?n.jsx(x,{data:e.charts.salesByDay}):n.jsx("div",{className:"h-40 bg-gray-50 rounded"})]}),(0,n.jsxs)("div",{className:"border rounded bg-white p-4",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Orders by Status"}),e?n.jsx(h,{data:e.charts.ordersByStatus}):n.jsx("div",{className:"h-40 bg-gray-50 rounded"})]})]})]})]})]})}[r,d,c,o]=m.then?(await m)():m,a()}catch(e){a(e)}})},6501:(e,s,t)=>{"use strict";t.a(e,async(e,s)=>{try{var a=t(1391),n=e([a]);a=(n.then?(await n)():n)[0],s()}catch(e){s(e)}})},1391:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(s,{ZP:()=>r});var n=t(9648),l=e([n]);let i=(n=(l.then?(await l)():l)[0]).default.create({baseURL:process.env.NEXT_PUBLIC_API_BASE_URL||"/api/v1",withCredentials:!0});i.interceptors.request.use(e=>e),i.interceptors.response.use(e=>e,e=>(e.response&&"string"==typeof e.response.data&&(e.response.data={error:e.response.data}),Promise.reject(e)));let r=i;a()}catch(e){a(e)}})},5111:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(s,{Dr:()=>r,Ft:()=>i,Hz:()=>d,Io:()=>m,bA:()=>x,h3:()=>h,rq:()=>c,wC:()=>o});var n=t(1391),l=e([n]);n=(l.then?(await l)():l)[0];let i=async e=>{let{data:s}=await n.ZP.get("/main-menus",{params:e});return s},r=async e=>{let{data:s}=await n.ZP.get("/sub-menus",{params:e});return s},d=e=>n.ZP.post("/main-menus",e),c=(e,s)=>n.ZP.put(`/main-menus/${e}`,s),o=e=>n.ZP.delete(`/main-menus/${e}`),m=e=>n.ZP.post("/sub-menus",e),x=(e,s)=>n.ZP.put(`/sub-menus/${e}`,s),h=e=>n.ZP.delete(`/sub-menus/${e}`);a()}catch(e){a(e)}})},3514:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(s,{a:()=>r});var n=t(6912),l=e([n]);n=(l.then?(await l)():l)[0];let i=()=>({user:null,token:null}),r=(0,n.create)(e=>({...i(),login({user:s}){e({user:s,token:null})},setUser(s){e({user:s})},logout(){e({user:null,token:null})}}));a()}catch(e){a(e)}})},6764:()=>{}};