(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56],{5710:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(5893),r=s(7294),l=s(3281),n=s(1664),i=s.n(n);function o(){let e=(0,l.a)(e=>e.user),t=(0,l.a)(e=>e.logout),[s,n]=(0,r.useState)(!1),o=(0,r.useRef)(null);return(0,r.useEffect)(()=>{function e(e){o.current&&!o.current.contains(e.target)&&n(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.jsx)("div",{className:"flex items-center justify-end px-4 py-2 bg-slate-900 border-b border-slate-800",children:(0,a.jsxs)("div",{className:"relative",ref:o,children:[(0,a.jsxs)("button",{onClick:()=>n(e=>!e),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700",children:[(0,a.jsx)("img",{src:(null==e?void 0:e.profileImage)||"/default-avatar.png",alt:"avatar",className:"w-8 h-8 rounded-full object-cover border border-slate-700"}),(0,a.jsx)("span",{className:"text-sm font-medium hidden sm:inline-block",children:(null==e?void 0:e.name)||"Admin"}),(0,a.jsx)("span",{className:"text-xs opacity-70",children:"▾"})]}),s&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow border p-2 z-50",children:[(0,a.jsx)("div",{className:"px-2 py-1 text-xs text-slate-500",children:"Account"}),(0,a.jsxs)(i(),{href:"/admin/setup",className:"flex items-center gap-2 px-2 py-2 rounded hover:bg-slate-100 text-sm",children:[(0,a.jsx)("span",{children:"⚙️"})," ",(0,a.jsx)("span",{children:"Setup"})]}),(0,a.jsxs)("button",{onClick:()=>{t()},className:"flex w-full text-left items-center gap-2 px-2 py-2 rounded hover:bg-slate-100 text-sm",children:[(0,a.jsx)("span",{children:"\uD83D\uDEAA"})," ",(0,a.jsx)("span",{children:"Logout"})]})]})]})})}},9559:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(5893),r=s(7294),l=s(4105);function n(e){let{columns:t=[],data:s=[],loading:n=!1,pagination:i={page:1,pages:1,total:0,limit:20},onPageChange:o,onFilterChange:c,filters:d=[],selectable:u=!1,selectedIds:x=new Set,onToggleRow:m,onToggleAll:p,actions:h,title:g="Data Table",exportFileName:b="export",onExport:f,onBulkDelete:y,showSearch:v=!0,searchPlaceholder:j="Search..."}=e,[N,w]=(0,r.useState)({}),[k,C]=(0,r.useState)(""),S=(0,r.useMemo)(()=>{let e=[...s];if(k){let s=k.toLowerCase();e=e.filter(e=>t.some(t=>{let a=e[t.key];return a&&String(a).toLowerCase().includes(s)}))}return Object.entries(N).forEach(t=>{let[s,a]=t;if(a){let t=String(a).toLowerCase();e=e.filter(e=>{let a=e[s];return a&&String(a).toLowerCase().includes(t)})}}),e},[s,k,N,t]),_=(e,t)=>{w(s=>({...s,[e]:t}))},L=async()=>{0!==x.size&&y&&await y(Array.from(x))},M=S.length>0&&S.every(e=>x.has(e._id)),E=S.some(e=>x.has(e._id));return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:g}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[u&&x.size>0&&(0,a.jsxs)("button",{onClick:L,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Selected (",x.size,")"]}),(0,a.jsxs)("button",{onClick:()=>{if(f){f(S);return}let e=S.map(e=>{let s={};return t.forEach(t=>{let a=e[t.key];s[t.label]=t.render?t.render(a,e):null!=a?a:""}),s}),s=l.P6.json_to_sheet(e),a=l.P6.book_new();l.P6.book_append_sheet(a,s,"Sheet1"),l.NC(a,"".concat(b,"_").concat(new Date().toISOString().split("T")[0],".xlsx"))},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Excel"]})]})]})}),(0,a.jsx)("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"space-y-3",children:[v&&(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",placeholder:j,value:k,onChange:e=>C(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})}),d&&d.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:d.map((e,t)=>{var s;return(0,a.jsx)("div",{children:"select"===e.type?(0,a.jsxs)("select",{value:e.value||"",onChange:t=>c&&c(e.key,t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm",children:[(0,a.jsx)("option",{value:"",children:e.placeholder||"All ".concat(e.label)}),null===(s=e.options)||void 0===s?void 0:s.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]}):(0,a.jsx)("input",{type:"text",placeholder:e.placeholder||"Filter by ".concat(e.label),value:e.value||"",onChange:t=>c&&c(e.key,t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm"})},t)})})]})}),(0,a.jsx)("div",{className:"p-2 border-b border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(".concat(t.length+(u?1:0)+(h?1:0),", minmax(120px, 1fr))")},children:[u&&(0,a.jsx)("div",{className:"px-2",children:(0,a.jsx)("input",{type:"checkbox",checked:M,ref:e=>{e&&(e.indeterminate=E&&!M)},onChange:e=>p&&p(e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})}),t.map(e=>(0,a.jsx)("div",{className:"px-2",children:(0,a.jsx)("input",{type:"text",placeholder:"Filter ".concat(e.label),value:N[e.key]||"",onChange:t=>_(e.key,t.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent outline-none"})},e.key)),h&&(0,a.jsx)("div",{})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[u&&(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12",children:(0,a.jsx)("input",{type:"checkbox",checked:M,ref:e=>{e&&(e.indeterminate=E&&!M)},onChange:e=>p&&p(e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})}),t.map(e=>(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.label},e.key)),h&&(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:(u?1:0)+t.length+(h?1:0),className:"px-4 py-8 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsxs)("svg",{className:"animate-spin h-6 w-6 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading..."})]})})}):0===S.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:(u?1:0)+t.length+(h?1:0),className:"px-4 py-8 text-center text-gray-500",children:"No records found"})}):S.map((e,s)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[u&&(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,a.jsx)("input",{type:"checkbox",checked:x.has(e._id),onChange:t=>m&&m(e,t.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})}),t.map(t=>{var s;return(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:t.render?t.render(e[t.key],e):null!==(s=e[t.key])&&void 0!==s?s:"-"},t.key)}),h&&(0,a.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:h(e)})]},e._id||s))})]})}),i&&i.pages>1&&(0,a.jsx)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(0,a.jsx)("span",{className:"font-medium",children:(i.page-1)*i.limit+1})," to"," ",(0,a.jsx)("span",{className:"font-medium",children:Math.min(i.page*i.limit,i.total)})," of"," ",(0,a.jsx)("span",{className:"font-medium",children:i.total})," results"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>o&&o(i.page-1),disabled:1===i.page,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,i.pages)},(e,t)=>{let s;return s=i.pages<=5?t+1:i.page<=3?t+1:i.page>=i.pages-2?i.pages-4+t:i.page-2+t,(0,a.jsx)("button",{onClick:()=>o&&o(s),className:"px-3 py-2 border rounded-lg text-sm font-medium ".concat(i.page===s?"bg-blue-600 text-white border-blue-600":"border-gray-300 text-gray-700 hover:bg-gray-50"),children:s},s)})}),(0,a.jsx)("button",{onClick:()=>o&&o(i.page+1),disabled:i.page>=i.pages,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})}},8384:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(5893),r=s(1664),l=s.n(r),n=s(1163);function i(e){let{items:t=[]}=e;return((0,n.useRouter)(),t&&0!==t.length)?(0,a.jsx)("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:(0,a.jsx)("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:t.map((e,s)=>{let r=s===t.length-1;return(0,a.jsxs)("li",{className:"inline-flex items-center",children:[s>0&&(0,a.jsx)("svg",{className:"w-6 h-6 text-gray-400 mx-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),r?(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-500 flex items-center",children:[e.icon&&(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.label]}):(0,a.jsxs)(l(),{href:e.href||"#",className:"text-sm font-medium text-gray-700 hover:text-blue-600 flex items-center transition-colors",children:[e.icon&&(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.label]})]},s)})})}):null}},6656:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(5893),r=s(7294);function l(e){let{isOpen:t,onClose:s,onSubmit:l,title:n="Form",fields:i=[],initialData:o={},loading:c=!1,submitLabel:d="Submit",cancelLabel:u="Cancel",sections:x=[]}=e,[m,p]=(0,r.useState)({}),[h,g]=(0,r.useState)({});(0,r.useEffect)(()=>{t&&(p(o||{}),g({}))},[t,o]);let b=(e,t)=>{p(s=>{let a={...s,[e]:t},r=(x.length>0?x.flatMap(e=>e.fields):i).find(t=>t.key===e);if(null==r?void 0:r.onChange){let e=r.onChange(t,a);if(e&&"object"==typeof e)return{...a,...e}}return a}),h[e]&&g(t=>{let s={...t};return delete s[e],s})},f=e=>{e.preventDefault();let t={};if((x.length>0?x.flatMap(e=>e.fields):i).forEach(e=>{e.required&&!m[e.key]&&(t[e.key]="".concat(e.label," is required")),"email"===e.type&&m[e.key]&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m[e.key])&&(t[e.key]="Invalid email format")}),Object.keys(t).length>0){g(t);return}l(m)};if(!t)return null;let y=e=>{var t,s;let r=null!==(s=m[e.key])&&void 0!==s?s:e.defaultValue||"",l=h[e.key],n="field-".concat(e.key);return(0,a.jsxs)("div",{className:e.fullWidth?"col-span-2":"",children:[(0,a.jsxs)("label",{htmlFor:n,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"select"===e.type?(0,a.jsxs)("select",{id:n,value:r,onChange:t=>b(e.key,t.target.value),disabled:e.disabled,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all ".concat(l?"border-red-500":"border-gray-300"," ").concat(e.disabled?"bg-gray-100 cursor-not-allowed":"bg-white"),required:e.required,children:[(0,a.jsx)("option",{value:"",children:e.placeholder||"Select ".concat(e.label)}),null===(t=e.options)||void 0===t?void 0:t.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]}):"textarea"===e.type?(0,a.jsx)("textarea",{id:n,value:r,onChange:t=>b(e.key,t.target.value),rows:e.rows||3,placeholder:e.placeholder,disabled:e.disabled,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all resize-none ".concat(l?"border-red-500":"border-gray-300"," ").concat(e.disabled?"bg-gray-100 cursor-not-allowed":"bg-white"),required:e.required}):"checkbox"===e.type?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{id:n,type:"checkbox",checked:r||!1,onChange:t=>b(e.key,t.target.checked),disabled:e.disabled,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,a.jsx)("label",{htmlFor:n,className:"ml-2 text-sm text-gray-700",children:e.checkboxLabel||e.label})]}):"date"===e.type?(0,a.jsx)("input",{id:n,type:"date",value:r,onChange:t=>b(e.key,t.target.value),disabled:e.disabled,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all ".concat(l?"border-red-500":"border-gray-300"," ").concat(e.disabled?"bg-gray-100 cursor-not-allowed":"bg-white"),required:e.required}):(0,a.jsx)("input",{id:n,type:e.type||"text",value:r,onChange:t=>b(e.key,"number"===e.type?parseFloat(t.target.value)||0:t.target.value),placeholder:e.placeholder,disabled:e.disabled,min:e.min,max:e.max,step:e.step,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all ".concat(l?"border-red-500":"border-gray-300"," ").concat(e.disabled?"bg-gray-100 cursor-not-allowed":"bg-white"),required:e.required}),l&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l}),e.helpText&&(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:e.helpText})]},e.key)};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,a.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:s}),(0,a.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-white",children:n}),(0,a.jsx)("button",{onClick:s,className:"text-white hover:text-gray-200 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsx)("form",{onSubmit:f,className:"px-6 py-4 max-h-[70vh] overflow-y-auto",children:x.length>0?x.map((e,t)=>(0,a.jsxs)("div",{className:"mb-6",children:[e.title&&(0,a.jsx)("h4",{className:"text-lg font-medium text-gray-800 mb-4 pb-2 border-b border-gray-200",children:e.title}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.fields.map(e=>y(e))})]},t)):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(e=>y(e))})}),(0,a.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:u}),(0,a.jsxs)("button",{type:"submit",onClick:f,disabled:c,className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg text-sm font-medium hover:from-blue-700 hover:to-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[c&&(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]})]})]})]})})}},7073:function(e,t,s){"use strict";s.d(t,{Z:function(){return g}});var a=s(5893),r=s(7294),l=s(1664),n=s.n(l),i=s(1163),o=s(5111),c=s(4221),d=s(3114);let u="admin_sidebar_state",x=()=>{try{return JSON.parse(localStorage.getItem(u))||{collapsed:!1,open:{}}}catch(e){return{collapsed:!1,open:{}}}},m=e=>{localStorage.setItem(u,JSON.stringify(e))};function p(e){let{open:t}=e;return(0,a.jsx)(c.E.span,{animate:{rotate:t?90:0},transition:{duration:.2},className:"inline-block",children:"▸"})}function h(e){let{node:t,depth:s=0,activePath:r,openMap:l,toggle:i,collapsed:o}=e,u=!t.submenus||0===t.submenus.length,x="sub:".concat(t._id),m=!!l[x],g=!!(r&&t.path&&r.startsWith(t.path)),b=(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-xl transition-all duration-300 ease-in-out ".concat(g?"bg-slate-700 text-white":"text-slate-200 hover:bg-slate-800/80"),onClick:()=>!u&&i(x),children:[!u&&(0,a.jsx)(p,{open:m}),!o&&(0,a.jsx)("span",{className:"text-sm font-medium truncate",children:t.name})]});return u?(0,a.jsx)(n(),{href:t.path||"#",title:o?t.name:void 0,className:"block",children:b}):(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{title:o?t.name:void 0,className:"w-full text-left",children:b}),(0,a.jsx)(d.M,{initial:!1,children:m&&!o&&(0,a.jsx)(c.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25},className:"ml-3 pl-2 border-l border-slate-700 space-y-1",children:(t.submenus||[]).map(e=>(0,a.jsx)(h,{node:e,depth:s+1,activePath:r,openMap:l,toggle:i,collapsed:o},e._id))},"content")})]})}function g(){let[e,t]=(0,r.useState)([]),[{collapsed:s,open:l},n]=(0,r.useState)(x),u=(0,i.useRouter)().asPath;(0,r.useEffect)(()=>{let e=!0;return(0,o.VI)().then(s=>{e&&t(s)}).catch(()=>{}),()=>{e=!1}},[]),(0,r.useEffect)(()=>{m({collapsed:s,open:l})},[s,l]);let g=(0,r.useMemo)(()=>e,[e]),b=e=>n(t=>({...t,open:{...t.open,[e]:!t.open[e]}})),f=e=>b("main:".concat(e));return(0,a.jsxs)("aside",{className:"".concat(s?"w-16":"w-64"," sticky top-0 self-start h-screen overflow-y-auto bg-slate-900 border-r border-slate-800 p-2 transition-all duration-300"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-2 mb-2",children:[!s&&(0,a.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Menu"}),(0,a.jsx)("button",{className:"text-slate-300 hover:text-white hover:bg-slate-800 rounded-lg p-1 transition-colors",onClick:()=>n(e=>({...e,collapsed:!e.collapsed})),title:s?"Expand sidebar":"Collapse sidebar",children:s?"\xbb":"\xab"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[g.map(e=>{var t,r;let n=!!l["main:".concat(e._id)],i=((null===(t=e.icon)||void 0===t?void 0:t[0])||(null===(r=e.name)||void 0===r?void 0:r[0])||"•").toUpperCase();return(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{className:"w-full flex items-center gap-3 px-3 py-2 rounded-xl text-left transition-all duration-300 ease-in-out ".concat(n?"bg-slate-800 text-white":"text-slate-200 hover:bg-slate-800/60"),onClick:()=>f(e._id),title:s?e.name:void 0,children:[(0,a.jsx)("div",{className:"w-7 h-7 rounded-md bg-slate-800/80 text-slate-200 grid place-items-center text-sm",children:i}),!s&&(0,a.jsx)("div",{className:"font-semibold text-sm truncate flex-1",children:e.name}),!s&&(0,a.jsx)(p,{open:n})]}),(0,a.jsx)(d.M,{initial:!1,children:n&&!s&&(0,a.jsx)(c.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25},className:"mt-1 ml-2 space-y-1",children:(e.submenus||[]).map(e=>(0,a.jsx)(h,{node:e,activePath:u,openMap:l,toggle:b,collapsed:s},e._id))})})]},e._id)}),0===g.length&&(0,a.jsx)("div",{className:"px-3 py-2 text-xs text-slate-400",children:"Loading menus..."})]})]})}},5111:function(e,t,s){"use strict";s.d(t,{Dr:function(){return n},Ft:function(){return l},Hz:function(){return i},Io:function(){return d},VI:function(){return r},bA:function(){return u},h3:function(){return x},rq:function(){return o},wC:function(){return c}});var a=s(452);let r=async()=>{let{data:e}=await a.ZP.get("/menus");return e.items},l=async e=>{let{data:t}=await a.ZP.get("/main-menus",{params:e});return t},n=async e=>{let{data:t}=await a.ZP.get("/sub-menus",{params:e});return t},i=e=>a.ZP.post("/main-menus",e),o=(e,t)=>a.ZP.put("/main-menus/".concat(e),t),c=e=>a.ZP.delete("/main-menus/".concat(e)),d=e=>a.ZP.post("/sub-menus",e),u=(e,t)=>a.ZP.put("/sub-menus/".concat(e),t),x=e=>a.ZP.delete("/sub-menus/".concat(e))},67:function(){},2061:function(){}}]);