(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37],{6449:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/menus/[main]/[...slug]",function(){return t(708)}])},708:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return m}});var s=t(5893),n=t(7294),l=t(1664),r=t.n(l),d=t(1163);function c(e){let{columns:a=[],data:t=[],actions:n}=e;return(0,s.jsx)("div",{className:"overflow-x-auto border rounded",children:(0,s.jsxs)("table",{className:"min-w-full text-sm",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[a.map(e=>(0,s.jsx)("th",{className:"px-3 py-2 text-left font-semibold text-gray-600",children:e.label},e.key)),n&&(0,s.jsx)("th",{className:"px-3 py-2"})]})}),(0,s.jsxs)("tbody",{children:[t.map((e,t)=>(0,s.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[a.map(a=>(0,s.jsx)("td",{className:"px-3 py-2",children:a.render?a.render(e[a.key],e):e[a.key]},a.key)),n&&(0,s.jsx)("td",{className:"px-3 py-2",children:n(e)})]},e._id||t)),0===t.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:a.length+(n?1:0),className:"px-3 py-6 text-center text-gray-500",children:"No records"})})]})]})})}function i(e){let{page:a=1,pages:t=1,onChange:n}=e;return t<=1?null:(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,s.jsx)("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:1===a,onClick:()=>n(Math.max(1,a-1)),children:"Prev"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",a," of ",t]}),(0,s.jsx)("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:a===t,onClick:()=>n(Math.min(t,a+1)),children:"Next"})]})}function u(e){let{onSearch:a,delay:t=400,placeholder:l="Search..."}=e,[r,d]=(0,n.useState)("");return(0,n.useEffect)(()=>{let e=setTimeout(()=>a(r),t);return()=>clearTimeout(e)},[r]),(0,s.jsx)("input",{value:r,onChange:e=>d(e.target.value),className:"border rounded px-3 py-2 text-sm w-full",placeholder:l})}var o=t(5111);function m(){let{main:e,slug:a=[]}=(0,d.useRouter)().query,t=null==a?void 0:a[a.length-1],l=null==a?void 0:a[a.length-2],r=(0,n.useMemo)(()=>"add"===t?"add":"edit"===l?"edit":"list",[t,l]);return"list"===r?(0,s.jsx)(x,{main:e,slug:a}):"add"===r?(0,s.jsx)(h,{main:e,slug:a}):"edit"===r?(0,s.jsx)(p,{main:e,id:t,slug:a}):null}function x(e){let{main:a,slug:t}=e,[l,d]=(0,n.useState)({items:[],page:1,pages:1,total:0}),[m,x]=(0,n.useState)(1),[h,p]=(0,n.useState)("");return(0,n.useEffect)(()=>{a&&(async()=>{d(await (0,o.Dr)({page:m,limit:20,search:h}))})()},[a,m,h]),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold",children:[a,...t].filter(Boolean).join(" / ")}),(0,s.jsx)(r(),{href:{pathname:"/menus/".concat(a,"/").concat(t.join("/"),"/add")},className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Add"})]}),(0,s.jsx)("div",{className:"mb-3 max-w-sm",children:(0,s.jsx)(u,{onSearch:p})}),(0,s.jsx)(c,{columns:[{key:"name",label:"Name"},{key:"slug",label:"Slug"},{key:"path",label:"Path"},{key:"order",label:"Order"}],data:l.items,actions:e=>(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(r(),{className:"px-2 py-1 border rounded",href:{pathname:"/menus/".concat(a,"/").concat(t.join("/"),"/edit/").concat(e._id)},children:"Edit"})})}),(0,s.jsx)(i,{page:l.page,pages:l.pages,onChange:x})]})}function h(){let e=(0,d.useRouter)(),{main:a,slug:t=[]}=e.query,[l,c]=(0,n.useState)({name:"",path:"",order:0}),[i,u]=(0,n.useState)(!1),m=async a=>{a.preventDefault(),u(!0);try{let a={name:l.name,path:l.path,order:Number(l.order)||0,main_menu_id:void 0};await (0,o.Io)(a),e.back()}finally{u(!1)}};return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 mb-3 text-sm text-gray-600",children:(0,s.jsx)(r(),{href:"/menus/".concat(a,"/").concat(t.slice(0,-1).join("/")),children:"← Back"})}),(0,s.jsx)("h1",{className:"text-xl font-semibold mb-3",children:"Add Module"}),(0,s.jsxs)("form",{onSubmit:m,className:"space-y-3 max-w-md",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Name"}),(0,s.jsx)("input",{className:"border rounded px-3 py-2 w-full",value:l.name,onChange:e=>c({...l,name:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Path"}),(0,s.jsx)("input",{className:"border rounded px-3 py-2 w-full",value:l.path,onChange:e=>c({...l,path:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Order"}),(0,s.jsx)("input",{type:"number",className:"border rounded px-3 py-2 w-full",value:l.order,onChange:e=>c({...l,order:e.target.value})})]}),(0,s.jsx)("button",{disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded",children:i?"Saving...":"Save"})]})]})}function p(){let e=(0,d.useRouter)(),{slug:a=[]}=e.query,t=a[a.length-1],[l,r]=(0,n.useState)({name:"",path:"",order:0}),[c,i]=(0,n.useState)(!1),u=async a=>{a.preventDefault(),i(!0);try{await (0,o.bA)(t,{name:l.name,path:l.path,order:Number(l.order)||0}),e.back()}finally{i(!1)}};return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 mb-3 text-sm text-gray-600",children:(0,s.jsx)("button",{onClick:()=>e.back(),className:"underline",children:"← Back"})}),(0,s.jsx)("h1",{className:"text-xl font-semibold mb-3",children:"Edit Module"}),(0,s.jsxs)("form",{onSubmit:u,className:"space-y-3 max-w-md",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Name"}),(0,s.jsx)("input",{className:"border rounded px-3 py-2 w-full",value:l.name,onChange:e=>r({...l,name:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Path"}),(0,s.jsx)("input",{className:"border rounded px-3 py-2 w-full",value:l.path,onChange:e=>r({...l,path:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Order"}),(0,s.jsx)("input",{type:"number",className:"border rounded px-3 py-2 w-full",value:l.order,onChange:e=>r({...l,order:e.target.value})})]}),(0,s.jsx)("button",{disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded",children:c?"Saving...":"Save"})]})]})}},5111:function(e,a,t){"use strict";t.d(a,{Dr:function(){return l},Io:function(){return r},VI:function(){return n},bA:function(){return d}});var s=t(452);let n=async()=>{let{data:e}=await s.Z.get("/menus");return e.items},l=async e=>{let{data:a}=await s.Z.get("/sub-menus",{params:e});return a},r=e=>s.Z.post("/sub-menus",e),d=(e,a)=>s.Z.put("/sub-menus/".concat(e),a)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=6449)}),_N_E=e.O()}]);