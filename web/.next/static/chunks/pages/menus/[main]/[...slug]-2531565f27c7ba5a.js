(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37],{6449:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/menus/[main]/[...slug]",function(){return t(708)}])},708:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return m}});var n=t(5893),s=t(7294),l=t(1664),r=t.n(l),d=t(1163);function c(e){let{columns:a=[],data:t=[],actions:s,selectable:l=!1,selectedIds:r=new Set,onToggleRow:d,onToggleAll:c}=e;return(0,n.jsx)("div",{className:"overflow-x-auto border rounded",children:(0,n.jsxs)("table",{className:"min-w-full text-sm",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[l&&(0,n.jsx)("th",{className:"px-3 py-2",children:c?(0,n.jsx)("input",{type:"checkbox",onChange:e=>c(e.target.checked),checked:t.length>0&&t.every(e=>r.has(e._id))}):null}),a.map(e=>(0,n.jsx)("th",{className:"px-3 py-2 text-left font-semibold text-gray-600",children:e.headerRender?e.headerRender():e.label},e.key)),s&&(0,n.jsx)("th",{className:"px-3 py-2"})]})}),(0,n.jsxs)("tbody",{children:[t.map((e,t)=>(0,n.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[l&&(0,n.jsx)("td",{className:"px-3 py-2",children:(0,n.jsx)("input",{type:"checkbox",checked:r.has(e._id),onChange:a=>d&&d(e,a.target.checked)})}),a.map(a=>(0,n.jsx)("td",{className:"px-3 py-2",children:a.render?a.render(e[a.key],e):e[a.key]},a.key)),s&&(0,n.jsx)("td",{className:"px-3 py-2",children:s(e)})]},e._id||t)),0===t.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:(l?1:0)+a.length+(s?1:0),className:"px-3 py-6 text-center text-gray-500",children:"No records"})})]})]})})}function i(e){let{page:a=1,pages:t=1,onChange:s}=e;return t<=1?null:(0,n.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,n.jsx)("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:1===a,onClick:()=>s(Math.max(1,a-1)),children:"Prev"}),(0,n.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",a," of ",t]}),(0,n.jsx)("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:a===t,onClick:()=>s(Math.min(t,a+1)),children:"Next"})]})}function u(e){let{onSearch:a,delay:t=400,placeholder:l="Search..."}=e,[r,d]=(0,s.useState)("");return(0,s.useEffect)(()=>{let e=setTimeout(()=>a(r),t);return()=>clearTimeout(e)},[r]),(0,n.jsx)("input",{value:r,onChange:e=>d(e.target.value),className:"border rounded px-3 py-2 text-sm w-full",placeholder:l})}var o=t(5111);function m(){let{main:e,slug:a=[]}=(0,d.useRouter)().query,t=null==a?void 0:a[a.length-1],l=null==a?void 0:a[a.length-2],r=(0,s.useMemo)(()=>"add"===t?"add":"edit"===l?"edit":"list",[t,l]);return"list"===r?(0,n.jsx)(x,{main:e,slug:a}):"add"===r?(0,n.jsx)(h,{main:e,slug:a}):"edit"===r?(0,n.jsx)(p,{main:e,id:t,slug:a}):null}function x(e){let{main:a,slug:t}=e,[l,d]=(0,s.useState)({items:[],page:1,pages:1,total:0}),[m,x]=(0,s.useState)(1),[h,p]=(0,s.useState)("");return(0,s.useEffect)(()=>{a&&(async()=>{d(await (0,o.Dr)({page:m,limit:20,search:h}))})()},[a,m,h]),(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,n.jsx)("h1",{className:"text-xl font-semibold",children:[a,...t].filter(Boolean).join(" / ")}),(0,n.jsx)(r(),{href:{pathname:"/menus/".concat(a,"/").concat(t.join("/"),"/add")},className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Add"})]}),(0,n.jsx)("div",{className:"mb-3 max-w-sm",children:(0,n.jsx)(u,{onSearch:p})}),(0,n.jsx)(c,{columns:[{key:"name",label:"Name"},{key:"slug",label:"Slug"},{key:"path",label:"Path"},{key:"order",label:"Order"}],data:l.items,actions:e=>(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsx)(r(),{className:"px-2 py-1 border rounded",href:{pathname:"/menus/".concat(a,"/").concat(t.join("/"),"/edit/").concat(e._id)},children:"Edit"})})}),(0,n.jsx)(i,{page:l.page,pages:l.pages,onChange:x})]})}function h(){let e=(0,d.useRouter)(),{main:a,slug:t=[]}=e.query,[l,c]=(0,s.useState)({name:"",path:"",order:0}),[i,u]=(0,s.useState)(!1),m=async a=>{a.preventDefault(),u(!0);try{let a={name:l.name,path:l.path,order:Number(l.order)||0,main_menu_id:void 0};await (0,o.Io)(a),e.back()}finally{u(!1)}};return(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("div",{className:"flex items-center gap-2 mb-3 text-sm text-gray-600",children:(0,n.jsx)(r(),{href:"/menus/".concat(a,"/").concat(t.slice(0,-1).join("/")),children:"← Back"})}),(0,n.jsx)("h1",{className:"text-xl font-semibold mb-3",children:"Add Module"}),(0,n.jsxs)("form",{onSubmit:m,className:"space-y-3 max-w-md",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm mb-1",children:"Name"}),(0,n.jsx)("input",{className:"border rounded px-3 py-2 w-full",value:l.name,onChange:e=>c({...l,name:e.target.value}),required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm mb-1",children:"Path"}),(0,n.jsx)("input",{className:"border rounded px-3 py-2 w-full",value:l.path,onChange:e=>c({...l,path:e.target.value}),required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm mb-1",children:"Order"}),(0,n.jsx)("input",{type:"number",className:"border rounded px-3 py-2 w-full",value:l.order,onChange:e=>c({...l,order:e.target.value})})]}),(0,n.jsx)("button",{disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded",children:i?"Saving...":"Save"})]})]})}function p(){let e=(0,d.useRouter)(),{slug:a=[]}=e.query,t=a[a.length-1],[l,r]=(0,s.useState)({name:"",path:"",order:0}),[c,i]=(0,s.useState)(!1),u=async a=>{a.preventDefault(),i(!0);try{await (0,o.bA)(t,{name:l.name,path:l.path,order:Number(l.order)||0}),e.back()}finally{i(!1)}};return(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("div",{className:"flex items-center gap-2 mb-3 text-sm text-gray-600",children:(0,n.jsx)("button",{onClick:()=>e.back(),className:"underline",children:"← Back"})}),(0,n.jsx)("h1",{className:"text-xl font-semibold mb-3",children:"Edit Module"}),(0,n.jsxs)("form",{onSubmit:u,className:"space-y-3 max-w-md",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm mb-1",children:"Name"}),(0,n.jsx)("input",{className:"border rounded px-3 py-2 w-full",value:l.name,onChange:e=>r({...l,name:e.target.value}),required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm mb-1",children:"Path"}),(0,n.jsx)("input",{className:"border rounded px-3 py-2 w-full",value:l.path,onChange:e=>r({...l,path:e.target.value}),required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm mb-1",children:"Order"}),(0,n.jsx)("input",{type:"number",className:"border rounded px-3 py-2 w-full",value:l.order,onChange:e=>r({...l,order:e.target.value})})]}),(0,n.jsx)("button",{disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded",children:c?"Saving...":"Save"})]})]})}},5111:function(e,a,t){"use strict";t.d(a,{Dr:function(){return r},Ft:function(){return l},Hz:function(){return d},Io:function(){return u},VI:function(){return s},bA:function(){return o},h3:function(){return m},rq:function(){return c},wC:function(){return i}});var n=t(452);let s=async()=>{let{data:e}=await n.ZP.get("/menus");return e.items},l=async e=>{let{data:a}=await n.ZP.get("/main-menus",{params:e});return a},r=async e=>{let{data:a}=await n.ZP.get("/sub-menus",{params:e});return a},d=e=>n.ZP.post("/main-menus",e),c=(e,a)=>n.ZP.put("/main-menus/".concat(e),a),i=e=>n.ZP.delete("/main-menus/".concat(e)),u=e=>n.ZP.post("/sub-menus",e),o=(e,a)=>n.ZP.put("/sub-menus/".concat(e),a),m=e=>n.ZP.delete("/sub-menus/".concat(e))}},function(e){e.O(0,[888,774,179],function(){return e(e.s=6449)}),_N_E=e.O()}]);