(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{4328:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return t(721)}])},721:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b}});var a=t(5893),n=t(7294),l=t(1664),d=t.n(l),r=t(1163),i=t(5111);function c(e){let{label:s,children:t,defaultOpen:l=!1}=e,[d,r]=(0,n.useState)(l);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{className:"w-full flex justify-between items-center px-3 py-2 hover:bg-gray-100 rounded",onClick:()=>r(e=>!e),children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:s}),(0,a.jsx)("span",{className:"transition-transform ".concat(d?"rotate-90":""),children:"â€º"})]}),d&&(0,a.jsx)("div",{className:"ml-3 border-l pl-3 space-y-1",children:t})]})}function o(e){let{node:s,depth:t=0,activePath:n}=e,l=!s.submenus||0===s.submenus.length,r=!!(n&&s.path&&n.startsWith(s.path));if(l)return(0,a.jsx)(d(),{href:s.path||"#",className:"block px-3 py-2 rounded text-sm ".concat(r?"bg-blue-50 text-blue-700 font-semibold":"hover:bg-gray-100"),children:s.name});let i=s.submenus.some(e=>n&&e.path&&n.startsWith(e.path));return(0,a.jsx)(c,{label:s.name,defaultOpen:i,children:s.submenus.map(e=>(0,a.jsx)(o,{node:e,depth:t+1,activePath:n},e._id))})}function u(){let[e,s]=(0,n.useState)([]),t=(0,r.useRouter)().asPath;(0,n.useEffect)(()=>{let e=!0;return(0,i.VI)().then(t=>{e&&s(t)}).catch(()=>{}),()=>{e=!1}},[]);let l=(0,n.useMemo)(()=>e,[e]);return(0,a.jsxs)("aside",{className:"w-64 border-r bg-white h-full overflow-y-auto p-2",children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-wide text-gray-500 px-3 mb-2",children:"Menu"}),(0,a.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"px-3 py-1 text-gray-700 font-semibold text-sm",children:e.name}),(0,a.jsx)("div",{className:"ml-1 space-y-1",children:(e.submenus||[]).map(e=>(0,a.jsx)(o,{node:e,depth:0,activePath:t},e._id))})]},e._id))})]})}var m=t(452);let h=async()=>{let{data:e}=await m.Z.get("/admin/dashboard");return e};function x(e){let{data:s}=e,t=Math.max(1,...s.map(e=>e.total));return(0,a.jsx)("div",{className:"h-40 flex items-end gap-1",children:s.map(e=>(0,a.jsx)("div",{className:"flex-1 bg-blue-200",style:{height:"".concat(e.total/t*100,"%")},title:"Day ".concat(e.day,": ").concat(e.total)},e.day))})}function v(e){let{data:s}=e,t=Object.entries(s),n=t.reduce((e,s)=>{let[,t]=s;return e+t},0);if(!n)return(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"No data"});let l=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#6366f1"];return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-32 h-32 rounded-full bg-gray-100 relative",style:{background:"conic-gradient(".concat(t.map((e,s)=>{let[t,a]=e;return"".concat(l[s%l.length]," ").concat(a/n*100,"%")}).join(","),")")}}),(0,a.jsx)("div",{className:"text-sm space-y-1",children:t.map((e,s)=>{let[t,n]=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 inline-block rounded-sm",style:{background:l[s%l.length]}})," ",t,": ",n]},t)})})]})})}function b(){var e,s,t,l,d,r,i,c;let[o,m]=(0,n.useState)(null);return(0,n.useEffect)(()=>{h().then(m).catch(()=>{})},[]),(0,a.jsxs)("div",{className:"min-h-[70vh] flex",children:[(0,a.jsx)(u,{}),(0,a.jsxs)("main",{className:"flex-1 p-4 space-y-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Admin Dashboard"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,a.jsxs)("div",{className:"p-4 border rounded bg-white",children:[(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:"Today's Orders"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:null!==(d=null==o?void 0:null===(e=o.cards)||void 0===e?void 0:e.todayOrders)&&void 0!==d?d:"-"})]}),(0,a.jsxs)("div",{className:"p-4 border rounded bg-white",children:[(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:"This Week Orders"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:null!==(r=null==o?void 0:null===(s=o.cards)||void 0===s?void 0:s.weekOrders)&&void 0!==r?r:"-"})]}),(0,a.jsxs)("div",{className:"p-4 border rounded bg-white",children:[(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:"This Month Orders"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:null!==(i=null==o?void 0:null===(t=o.cards)||void 0===t?void 0:t.monthOrders)&&void 0!==i?i:"-"})]}),(0,a.jsxs)("div",{className:"p-4 border rounded bg-white",children:[(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:"Low Stock Products"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:null!==(c=null==o?void 0:null===(l=o.cards)||void 0===l?void 0:l.lowStock)&&void 0!==c?c:"-"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"border rounded bg-white p-4 lg:col-span-2",children:[(0,a.jsx)("div",{className:"font-semibold mb-2",children:"Sales by Day (This Month)"}),o?(0,a.jsx)(x,{data:o.charts.salesByDay}):(0,a.jsx)("div",{className:"h-40 bg-gray-50 rounded"})]}),(0,a.jsxs)("div",{className:"border rounded bg-white p-4",children:[(0,a.jsx)("div",{className:"font-semibold mb-2",children:"Orders by Status"}),o?(0,a.jsx)(v,{data:o.charts.ordersByStatus}):(0,a.jsx)("div",{className:"h-40 bg-gray-50 rounded"})]})]})]})]})}},5111:function(e,s,t){"use strict";t.d(s,{Dr:function(){return l},Io:function(){return d},VI:function(){return n},bA:function(){return r}});var a=t(452);let n=async()=>{let{data:e}=await a.Z.get("/menus");return e.items},l=async e=>{let{data:s}=await a.Z.get("/sub-menus",{params:e});return s},d=e=>a.Z.post("/sub-menus",e),r=(e,s)=>a.Z.put("/sub-menus/".concat(e),s)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=4328)}),_N_E=e.O()}]);