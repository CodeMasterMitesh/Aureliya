(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[976],{3887:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/masters/accounts/groups",function(){return o(9523)}])},9523:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return h}});var n=o(5893),r=o(7294),a=o(1163),i=o(6455),c=o.n(i),l=o(7073),s=o(5710),u=o(9559),d=o(6656),p=o(8384),m=o(3514),f=o(7284);function h(){let e=(0,a.useRouter)(),t=(0,m.a)(e=>e.token),o=(0,m.a)(e=>e.user),[i,h]=(0,r.useState)([]),[g,x]=(0,r.useState)(1),[v,b]=(0,r.useState)(1),[w,y]=(0,r.useState)(0),[C]=(0,r.useState)(20),[k,j]=(0,r.useState)(""),[N,B]=(0,r.useState)(!0),[_,A]=(0,r.useState)(null),[S,E]=(0,r.useState)(!1),[Z,D]=(0,r.useState)(new Set),L=(null==o?void 0:o.company)||"",M=(null==o?void 0:o.branch)||"";async function P(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;B(!0);try{let{items:e,pages:o,total:n,page:r}=await (0,f.NB)({page:t,limit:C,search:k,company:L||void 0,branch:M||void 0});h(e),b(o),y(n),x(r),D(new Set)}catch(n){var o;let t=null==n?void 0:null===(o=n.response)||void 0===o?void 0:o.status;(401===t||403===t)&&e.replace("/admin/login"),await c().fire({icon:"error",title:"Error",text:"Failed to load account groups. Please try again.",confirmButtonColor:"#3b82f6"})}finally{B(!1)}}(0,r.useEffect)(()=>{t||e.replace("/admin/login")},[t]),(0,r.useEffect)(()=>{P(1)},[k,L,M]);let G=e=>{A(e),E(!0)},T=async e=>{if((await c().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await (0,f.o)(e),await c().fire({icon:"success",title:"Deleted!",text:"Account group has been deleted.",timer:2e3,showConfirmButton:!1}),P(g)}catch(e){var t,o;await c().fire({icon:"error",title:"Error",text:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(t=o.data)||void 0===t?void 0:t.error)||"Failed to delete account group.",confirmButtonColor:"#3b82f6"})}},F=async e=>{if((await c().fire({title:"Are you sure?",text:"You are about to delete ".concat(e.length," account group(s). This action cannot be undone!"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete ".concat(e.length," item(s)!")})).isConfirmed)try{await (0,f.iC)(e),await c().fire({icon:"success",title:"Deleted!",text:"".concat(e.length," account group(s) have been deleted."),timer:2e3,showConfirmButton:!1}),P(g)}catch(e){var t,o;await c().fire({icon:"error",title:"Error",text:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(t=o.data)||void 0===t?void 0:t.error)||"Failed to delete account groups.",confirmButtonColor:"#3b82f6"})}},H=async e=>{try{let t={...e};L&&(t.company=L),M&&(t.branch=M),_?(await (0,f.H3)(_._id,t),await c().fire({icon:"success",title:"Updated!",text:"Account group has been updated successfully.",timer:2e3,showConfirmButton:!1})):(await (0,f.yZ)(t),await c().fire({icon:"success",title:"Created!",text:"Account group has been created successfully.",timer:2e3,showConfirmButton:!1})),E(!1),A(null),P(1)}catch(e){var t,o;await c().fire({icon:"error",title:"Error",text:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(t=o.data)||void 0===t?void 0:t.error)||"Failed to save account group.",confirmButtonColor:"#3b82f6"})}},Y=(0,r.useMemo)(()=>[{key:"name",label:"Name"},{key:"code",label:"Code"},{key:"description",label:"Description"},{key:"is_active",label:"Active",render:e=>(0,n.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e?"Yes":"No"})}],[]),O=(0,r.useMemo)(()=>[{key:"name",label:"Name",required:!0,placeholder:"Enter account group name"},{key:"code",label:"Code",placeholder:"Enter code (optional)"},{key:"description",label:"Description",type:"textarea",rows:4,placeholder:"Enter description (optional)"},{key:"is_active",label:"Active",type:"checkbox",checkboxLabel:"Mark as active",defaultValue:!0}],[]),W=(0,r.useMemo)(()=>[{title:"Account Group Information",fields:O}],[O]);return t?(0,n.jsxs)("div",{className:"min-h-screen flex bg-gray-50",children:[(0,n.jsx)(l.Z,{}),(0,n.jsxs)("main",{className:"flex-1 flex flex-col",children:[(0,n.jsx)(s.Z,{}),(0,n.jsxs)("div",{className:"p-6 space-y-6",children:[(0,n.jsx)(p.Z,{items:[{label:"Dashboard",href:"/admin/dashboard",icon:"\uD83C\uDFE0"},{label:"Masters",href:"/admin/masters"},{label:"Accounts",href:"/admin/masters/accounts"},{label:"Account Groups"}]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Account Groups"}),(0,n.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your account groups"})]}),(0,n.jsxs)("button",{onClick:()=>{A(null),E(!0)},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl flex items-center gap-2 font-medium",children:[(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Account Group"]})]}),(0,n.jsx)(u.Z,{title:"Account Groups",columns:Y,data:i,loading:N,pagination:{page:g,pages:v,total:w,limit:C},onPageChange:e=>{x(e),P(e)},filters:[],selectable:!0,selectedIds:Z,onToggleRow:(e,t)=>{let o=new Set(Z);t?o.add(e._id):o.delete(e._id),D(o)},onToggleAll:e=>{e?D(new Set(i.map(e=>e._id))):D(new Set)},onBulkDelete:F,exportFileName:"account-groups",showSearch:!0,searchPlaceholder:"Search account groups...",actions:e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("button",{onClick:()=>G(e),className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium flex items-center gap-1",children:[(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),(0,n.jsxs)("button",{onClick:()=>T(e._id),className:"px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium flex items-center gap-1",children:[(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})})]})]}),(0,n.jsx)(d.Z,{isOpen:S,onClose:()=>{E(!1),A(null)},onSubmit:H,title:_?"Edit Account Group":"Add New Account Group",sections:W,initialData:_?{name:_.name||"",code:_.code||"",description:_.description||"",is_active:!1!==_.is_active}:{name:"",code:"",description:"",is_active:!0},submitLabel:_?"Update Account Group":"Create Account Group"})]}):null}},7284:function(e,t,o){"use strict";o.d(t,{H3:function(){return i},NB:function(){return r},iC:function(){return l},o:function(){return c},yZ:function(){return a}});var n=o(452);let r=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:t}=await n.ZP.get("/account-groups",{params:e});return t},a=e=>n.ZP.post("/account-groups",e),i=(e,t)=>n.ZP.put("/account-groups/".concat(e),t),c=e=>n.ZP.delete("/account-groups/".concat(e)),l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.ZP.delete("/account-groups",{data:{ids:e}})}}},function(e){e.O(0,[166,251,738,56,888,774,179],function(){return e(e.s=3887)}),_N_E=e.O()}]);