(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[410],{3184:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/main-menus",function(){return n(2705)}])},2705:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var a=n(5893),i=n(7294),o=n(1163),l=n(6455),r=n.n(l),s=n(7073),u=n(5710),d=n(9559),c=n(6656),m=n(8384),h=n(3281),f=n(5111);function x(){let e=(0,o.useRouter)(),t=(0,h.a)(e=>e.token),[n,l]=(0,i.useState)([]),[x,g]=(0,i.useState)(1),[p,v]=(0,i.useState)(1),[w,b]=(0,i.useState)(0),[y]=(0,i.useState)(20),[M,k]=(0,i.useState)(""),[j,C]=(0,i.useState)(!0),[N,S]=(0,i.useState)(null),[E,_]=(0,i.useState)(!1),[B,L]=(0,i.useState)(new Set);async function D(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x;C(!0);try{let{items:e,pages:n,total:a,page:i}=await (0,f.Ft)({page:t,limit:y,search:M});l(e),v(n),b(a),g(i),L(new Set)}catch(a){var n;let t=null==a?void 0:null===(n=a.response)||void 0===n?void 0:n.status;(401===t||403===t)&&e.replace("/admin/login"),await r().fire({icon:"error",title:"Error",text:"Failed to load main menus. Please try again.",confirmButtonColor:"#3b82f6"})}finally{C(!1)}}(0,i.useEffect)(()=>{t||e.replace("/admin/login")},[t]),(0,i.useEffect)(()=>{D(1)},[M]);let F=e=>{S(e),_(!0)},A=async e=>{if((await r().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await (0,f.wC)(e),await r().fire({icon:"success",title:"Deleted!",text:"Main menu has been deleted.",timer:2e3,showConfirmButton:!1}),D(x)}catch(e){var t,n;await r().fire({icon:"error",title:"Error",text:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.error)||"Failed to delete main menu.",confirmButtonColor:"#3b82f6"})}},H=async e=>{try{N?(await (0,f.rq)(N._id,e),await r().fire({icon:"success",title:"Updated!",text:"Main menu has been updated successfully.",timer:2e3,showConfirmButton:!1})):(await (0,f.Hz)(e),await r().fire({icon:"success",title:"Created!",text:"Main menu has been created successfully.",timer:2e3,showConfirmButton:!1})),_(!1),S(null),D(1)}catch(e){var t,n;await r().fire({icon:"error",title:"Error",text:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.error)||"Failed to save main menu.",confirmButtonColor:"#3b82f6"})}},O=(0,i.useMemo)(()=>[{key:"name",label:"Name"},{key:"slug",label:"Slug"},{key:"icon",label:"Icon"},{key:"order",label:"Order"}],[]),P=(0,i.useMemo)(()=>[{key:"name",label:"Name",required:!0,placeholder:"Enter menu name"},{key:"slug",label:"Slug",placeholder:"Enter slug (auto-generated if empty)"},{key:"icon",label:"Icon",placeholder:"Enter icon name or emoji"},{key:"order",label:"Order",type:"number",placeholder:"Enter display order",defaultValue:0}],[]),T=(0,i.useMemo)(()=>[{title:"Main Menu Information",fields:P}],[P]);return t?(0,a.jsxs)("div",{className:"min-h-screen flex bg-gray-50",children:[(0,a.jsx)(s.Z,{}),(0,a.jsxs)("main",{className:"flex-1 flex flex-col",children:[(0,a.jsx)(u.Z,{}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsx)(m.Z,{items:[{label:"Dashboard",href:"/admin/dashboard",icon:"\uD83C\uDFE0"},{label:"Main Menus"}]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Main Menus"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your main navigation menus"})]}),(0,a.jsxs)("button",{onClick:()=>{S(null),_(!0)},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl flex items-center gap-2 font-medium",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Main Menu"]})]}),(0,a.jsx)(d.Z,{title:"Main Menus",columns:O,data:n,loading:j,pagination:{page:x,pages:p,total:w,limit:y},onPageChange:e=>{g(e),D(e)},filters:[],selectable:!0,selectedIds:B,onToggleRow:(e,t)=>{let n=new Set(B);t?n.add(e._id):n.delete(e._id),L(n)},onToggleAll:e=>{e?L(new Set(n.map(e=>e._id))):L(new Set)},exportFileName:"main-menus",showSearch:!0,searchPlaceholder:"Search main menus...",actions:e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>F(e),className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium flex items-center gap-1",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),(0,a.jsxs)("button",{onClick:()=>A(e._id),className:"px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium flex items-center gap-1",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})})]})]}),(0,a.jsx)(c.Z,{isOpen:E,onClose:()=>{_(!1),S(null)},onSubmit:H,title:N?"Edit Main Menu":"Add New Main Menu",sections:T,initialData:N?{name:N.name||"",slug:N.slug||"",icon:N.icon||"",order:N.order||0}:{name:"",slug:"",icon:"",order:0},submitLabel:N?"Update Main Menu":"Create Main Menu"})]}):null}}},function(e){e.O(0,[166,251,664,738,56,888,774,179],function(){return e(e.s=3184)}),_N_E=e.O()}]);