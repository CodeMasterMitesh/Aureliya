(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[606],{5230:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/setup",function(){return n(6853)}])},5710:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var s=n(5893),a=n(7294),i=n(3281),l=n(1664),r=n.n(l);function c(){let e=(0,i.a)(e=>e.user),t=(0,i.a)(e=>e.logout),[n,l]=(0,a.useState)(!1),c=(0,a.useRef)(null);return(0,a.useEffect)(()=>{function e(e){c.current&&!c.current.contains(e.target)&&l(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.jsx)("div",{className:"flex items-center justify-end px-4 py-2 bg-slate-900 border-b border-slate-800",children:(0,s.jsxs)("div",{className:"relative",ref:c,children:[(0,s.jsxs)("button",{onClick:()=>l(e=>!e),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-800 text-slate-200 hover:bg-slate-700",children:[(0,s.jsx)("img",{src:(null==e?void 0:e.profileImage)||"/default-avatar.png",alt:"avatar",className:"w-8 h-8 rounded-full object-cover border border-slate-700"}),(0,s.jsx)("span",{className:"text-sm font-medium hidden sm:inline-block",children:(null==e?void 0:e.name)||"Admin"}),(0,s.jsx)("span",{className:"text-xs opacity-70",children:"▾"})]}),n&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow border p-2 z-50",children:[(0,s.jsx)("div",{className:"px-2 py-1 text-xs text-slate-500",children:"Account"}),(0,s.jsxs)(r(),{href:"/admin/setup",className:"flex items-center gap-2 px-2 py-2 rounded hover:bg-slate-100 text-sm",children:[(0,s.jsx)("span",{children:"⚙️"})," ",(0,s.jsx)("span",{children:"Setup"})]}),(0,s.jsxs)("button",{onClick:()=>{t()},className:"flex w-full text-left items-center gap-2 px-2 py-2 rounded hover:bg-slate-100 text-sm",children:[(0,s.jsx)("span",{children:"\uD83D\uDEAA"})," ",(0,s.jsx)("span",{children:"Logout"})]})]})]})})}},7073:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var s=n(5893),a=n(7294),i=n(1664),l=n.n(i),r=n(1163),c=n(5111),o=n(4221),u=n(3114);let d="admin_sidebar_state",m=()=>{try{return JSON.parse(localStorage.getItem(d))||{collapsed:!1,open:{}}}catch(e){return{collapsed:!1,open:{}}}},x=e=>{localStorage.setItem(d,JSON.stringify(e))};function p(e){let{open:t}=e;return(0,s.jsx)(o.E.span,{animate:{rotate:t?90:0},transition:{duration:.2},className:"inline-block",children:"▸"})}function h(e){let{node:t,depth:n=0,activePath:a,openMap:i,toggle:r,collapsed:c}=e,d=!t.submenus||0===t.submenus.length,m="sub:".concat(t._id),x=!!i[m],f=!!(a&&t.path&&a.startsWith(t.path)),g=(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-xl transition-all duration-300 ease-in-out ".concat(f?"bg-slate-700 text-white":"text-slate-200 hover:bg-slate-800/80"),onClick:()=>!d&&r(m),children:[!d&&(0,s.jsx)(p,{open:x}),!c&&(0,s.jsx)("span",{className:"text-sm font-medium truncate",children:t.name})]});return d?(0,s.jsx)(l(),{href:t.path||"#",title:c?t.name:void 0,className:"block",children:g}):(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{title:c?t.name:void 0,className:"w-full text-left",children:g}),(0,s.jsx)(u.M,{initial:!1,children:x&&!c&&(0,s.jsx)(o.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25},className:"ml-3 pl-2 border-l border-slate-700 space-y-1",children:(t.submenus||[]).map(e=>(0,s.jsx)(h,{node:e,depth:n+1,activePath:a,openMap:i,toggle:r,collapsed:c},e._id))},"content")})]})}function f(){let[e,t]=(0,a.useState)([]),[{collapsed:n,open:i},l]=(0,a.useState)(m),d=(0,r.useRouter)().asPath;(0,a.useEffect)(()=>{let e=!0;return(0,c.VI)().then(n=>{e&&t(n)}).catch(()=>{}),()=>{e=!1}},[]),(0,a.useEffect)(()=>{x({collapsed:n,open:i})},[n,i]);let f=(0,a.useMemo)(()=>e,[e]),g=e=>l(t=>({...t,open:{...t.open,[e]:!t.open[e]}})),b=e=>g("main:".concat(e));return(0,s.jsxs)("aside",{className:"".concat(n?"w-16":"w-64"," sticky top-0 self-start h-screen overflow-y-auto bg-slate-900 border-r border-slate-800 p-2 transition-all duration-300"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-2 mb-2",children:[!n&&(0,s.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Menu"}),(0,s.jsx)("button",{className:"text-slate-300 hover:text-white hover:bg-slate-800 rounded-lg p-1 transition-colors",onClick:()=>l(e=>({...e,collapsed:!e.collapsed})),title:n?"Expand sidebar":"Collapse sidebar",children:n?"\xbb":"\xab"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[f.map(e=>{var t,a;let l=!!i["main:".concat(e._id)],r=((null===(t=e.icon)||void 0===t?void 0:t[0])||(null===(a=e.name)||void 0===a?void 0:a[0])||"•").toUpperCase();return(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{className:"w-full flex items-center gap-3 px-3 py-2 rounded-xl text-left transition-all duration-300 ease-in-out ".concat(l?"bg-slate-800 text-white":"text-slate-200 hover:bg-slate-800/60"),onClick:()=>b(e._id),title:n?e.name:void 0,children:[(0,s.jsx)("div",{className:"w-7 h-7 rounded-md bg-slate-800/80 text-slate-200 grid place-items-center text-sm",children:r}),!n&&(0,s.jsx)("div",{className:"font-semibold text-sm truncate flex-1",children:e.name}),!n&&(0,s.jsx)(p,{open:l})]}),(0,s.jsx)(u.M,{initial:!1,children:l&&!n&&(0,s.jsx)(o.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25},className:"mt-1 ml-2 space-y-1",children:(e.submenus||[]).map(e=>(0,s.jsx)(h,{node:e,activePath:d,openMap:i,toggle:g,collapsed:n},e._id))})})]},e._id)}),0===f.length&&(0,s.jsx)("div",{className:"px-3 py-2 text-xs text-slate-400",children:"Loading menus..."})]})]})}},6853:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s=n(5893),a=n(7294),i=n(1163),l=n(7073),r=n(5710),c=n(1664),o=n.n(c),u=n(3281);let d=[{href:"/admin/companies",title:"Companies",desc:"Manage companies (create, update, bulk delete).",icon:"\uD83C\uDFE2"},{href:"/admin/branches",title:"Branches",desc:"Manage branches under companies.",icon:"\uD83C\uDFEC"},{href:"/admin/main-menus",title:"Main Menus",desc:"Top-level navigation groups.",icon:"\uD83E\uDDED"},{href:"/admin/sub-menus",title:"Sub Menus",desc:"Nested navigation items.",icon:"\uD83D\uDDC2️"},{href:"/admin/masters/accounts/groups",title:"Account Groups",desc:"Ledger grouping (filtering and classification).",icon:"\uD83D\uDCC1"},{href:"/admin/masters/accounts/ledger",title:"Ledgers",desc:"Full ledger master data management.",icon:"\uD83D\uDCD2"}];function m(){let e=(0,i.useRouter)(),t=(0,u.a)(e=>e.token);return((0,a.useEffect)(()=>{t||e.replace("/admin/login")},[t]),t)?(0,s.jsxs)("div",{className:"min-h-screen flex",children:[(0,s.jsx)(l.Z,{}),(0,s.jsxs)("main",{className:"flex-1 flex flex-col",children:[(0,s.jsx)(r.Z,{}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Admin Setup"}),(0,s.jsx)("div",{className:"grid gap-5 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:d.map(e=>(0,s.jsxs)(o(),{href:e.href,className:"group border rounded-lg bg-white p-4 flex flex-col gap-2 shadow-sm hover:shadow transition",children:[(0,s.jsx)("div",{className:"text-3xl",children:e.icon}),(0,s.jsx)("div",{className:"font-medium text-slate-800 group-hover:text-blue-600",children:e.title}),(0,s.jsx)("div",{className:"text-xs text-slate-500 leading-relaxed",children:e.desc}),(0,s.jsx)("div",{className:"mt-auto text-sm text-blue-600 font-semibold opacity-0 group-hover:opacity-100 transition",children:"Manage →"})]},e.href))})]})]})]}):null}},5111:function(e,t,n){"use strict";n.d(t,{Dr:function(){return l},Ft:function(){return i},Hz:function(){return r},Io:function(){return u},VI:function(){return a},bA:function(){return d},h3:function(){return m},rq:function(){return c},wC:function(){return o}});var s=n(452);let a=async()=>{let{data:e}=await s.ZP.get("/menus");return e.items},i=async e=>{let{data:t}=await s.ZP.get("/main-menus",{params:e});return t},l=async e=>{let{data:t}=await s.ZP.get("/sub-menus",{params:e});return t},r=e=>s.ZP.post("/main-menus",e),c=(e,t)=>s.ZP.put("/main-menus/".concat(e),t),o=e=>s.ZP.delete("/main-menus/".concat(e)),u=e=>s.ZP.post("/sub-menus",e),d=(e,t)=>s.ZP.put("/sub-menus/".concat(e),t),m=e=>s.ZP.delete("/sub-menus/".concat(e))}},function(e){e.O(0,[664,738,888,774,179],function(){return e(e.s=5230)}),_N_E=e.O()}]);