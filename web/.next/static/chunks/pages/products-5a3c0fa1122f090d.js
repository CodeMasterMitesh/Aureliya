(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{8868:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return r(2117)}])},3486:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var l=r(5893);function a(e){let{as:t="button",variant:r="outline",className:a="",...s}=e;return(0,l.jsx)(t,{className:"".concat("inline-flex items-center justify-center rounded-md text-sm transition"," ").concat("solid"===r?"bg-blue-600 text-white hover:bg-blue-700 border border-blue-600":"border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-900"," ").concat(a),...s})}},2117:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var l=r(5893),a=r(1163),s=r(7294),n=r(1664),i=r.n(n),o=r(8145),c=r(3486),d=r(4529);let u="wishlist_items",m=(0,d.Ue)((e,t)=>({items:function(){try{return JSON.parse(localStorage.getItem(u)||"[]")}catch(e){return[]}}(),has:e=>t().items.some(t=>t.slug===e),toggle:r=>{let l=t().items.slice(),a=l.findIndex(e=>e.slug===r.slug);a>=0?l.splice(a,1):l.push({...r,addedAt:Date.now()}),e({items:l}),localStorage.setItem(u,JSON.stringify(l))},clear:()=>{e({items:[]}),localStorage.removeItem(u)}}));function h(e){let{value:t=0}=e,r=Math.max(0,Math.min(5,Number(t)||0)),a=Math.floor(r),s=r-a>=.5,n=5-a-(s?1:0),i=e=>{let{type:t,i:r}=e;return"half"===t?(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"h-4 w-4 text-amber-500",children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"half-".concat(r),children:[(0,l.jsx)("stop",{offset:"50%",stopColor:"currentColor"}),(0,l.jsx)("stop",{offset:"50%",stopColor:"transparent"})]})}),(0,l.jsx)("path",{fill:"url(#half-".concat(r,")"),stroke:"currentColor",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})]},"h".concat(r)):"empty"===t?(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"h-4 w-4 text-amber-500 opacity-30",children:(0,l.jsx)("path",{fill:"currentColor",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})},"e".concat(r)):(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"h-4 w-4 text-amber-500",children:(0,l.jsx)("path",{fill:"currentColor",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})},"f".concat(r))};return(0,l.jsxs)("div",{className:"flex items-center gap-0.5","aria-label":"".concat(r.toFixed(1)," out of 5 stars"),children:[Array.from({length:a}).map((e,t)=>(0,l.jsx)(i,{type:"full",i:t},"sf".concat(t))),s&&(0,l.jsx)(i,{type:"half",i:a}),Array.from({length:n}).map((e,t)=>(0,l.jsx)(i,{type:"empty",i:t},"se".concat(t)))]})}function p(e){var t,r,a,n;let{product:d}=e,u=(0,o.j)(e=>e.add),[m,p]=(0,s.useState)(!1),g=(null===(r=d.price)||void 0===r?void 0:null===(t=r.toLocaleString)||void 0===t?void 0:t.call(r,"en-IN"))||"—",f=d.image||"https://picsum.photos/seed/".concat(d.slug,"/600/600");return(0,s.useEffect)(()=>{if(m)return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e);function e(e){"Escape"===e.key&&p(!1)}},[m]),(0,l.jsxs)("div",{className:"group relative border border-neutral-200/70 dark:border-neutral-800 rounded-xl overflow-hidden",children:[(0,l.jsxs)("div",{className:"relative aspect-square bg-neutral-100 dark:bg-neutral-900",children:[(0,l.jsx)("img",{src:f,alt:d.title,className:"h-full w-full object-cover",loading:"lazy"}),(0,l.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-end justify-center p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-out",children:(0,l.jsxs)("div",{className:"pointer-events-auto flex gap-2",children:[(0,l.jsx)(c.Z,{variant:"solid",className:"px-3 py-1.5","aria-label":"Add to cart",onClick:()=>u({slug:d.slug,title:d.title,price:d.price,qty:1,image:f}),children:"\uD83D\uDED2 Add"}),(0,l.jsx)(c.Z,{variant:"outline",className:"px-3 py-1.5",onClick:()=>p(!0),"aria-label":"Quick view",children:"\uD83D\uDC41 Quick view"})]})}),(0,l.jsx)(x,{product:d,image:f})]}),(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)(i(),{href:"/product/".concat(d.slug),className:"font-medium group-hover:text-blue-600 line-clamp-1",children:d.title}),(0,l.jsx)("div",{className:"mt-1 text-sm text-neutral-500 capitalize",children:d.category||"category"}),(0,l.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"font-semibold",children:["₹",g]}),(0,l.jsx)(h,{value:(null===(a=d.rating)||void 0===a?void 0:a.avg)||0})]})]}),m&&(0,l.jsx)("div",{role:"dialog","aria-modal":"true","aria-label":"Quick view dialog",className:"fixed inset-0 z-[60] p-4",children:(0,l.jsxs)("div",{className:"relative flex h-full w-full items-center justify-center",children:[(0,l.jsx)("button",{type:"button","aria-label":"Close quick view",className:"absolute inset-0 h-full w-full bg-black/50",onClick:()=>p(!1)}),(0,l.jsx)("div",{className:"relative z-10 w-full max-w-lg rounded-xl border border-neutral-200/70 dark:border-neutral-800 bg-white dark:bg-neutral-950 p-4",children:(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("img",{src:f,alt:"",className:"h-32 w-32 rounded-lg object-cover"}),(0,l.jsxs)("div",{className:"min-w-0",children:[(0,l.jsx)("div",{className:"font-semibold text-lg line-clamp-2",children:d.title}),(0,l.jsx)("div",{className:"text-sm text-neutral-500 capitalize",children:d.category}),(0,l.jsxs)("div",{className:"mt-2 font-semibold",children:["₹",g]}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(h,{value:(null===(n=d.rating)||void 0===n?void 0:n.avg)||0})}),(0,l.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,l.jsx)(c.Z,{variant:"solid",onClick:()=>{u({slug:d.slug,title:d.title,price:d.price,qty:1,image:f}),p(!1)},children:"\uD83D\uDED2 Add to cart"}),(0,l.jsx)(i(),{href:"/product/".concat(d.slug),className:"inline-flex items-center rounded-md border border-neutral-300 dark:border-neutral-700 px-3 py-2 text-sm hover:bg-neutral-50 dark:hover:bg-neutral-900",onClick:()=>p(!1),children:"View details"})]})]})]})})]})})]})}function x(e){let{product:t,image:r}=e,{toggle:a,has:s}=m(),n=s(t.slug);return(0,l.jsx)("button",{type:"button","aria-label":"Add to wishlist","aria-pressed":n,onClick:e=>{e.stopPropagation(),e.preventDefault(),a({slug:t.slug,title:t.title,price:t.price,image:r})},className:"absolute top-3 right-3 rounded-full border p-2 shadow-sm transition ".concat(n?"bg-red-500 text-white border-red-600":"bg-white/90 dark:bg-neutral-900/90 text-neutral-800 dark:text-neutral-100 border-neutral-200/70 dark:border-neutral-800 hover:scale-105"),children:"❤"})}var g=r(6006),f=r(452);async function v(){let{data:e}=await f.ZP.get("/categories");return e}function b(){let e=(0,a.useRouter)(),t="string"==typeof e.query.q?e.query.q:"",r="string"==typeof e.query.sort?e.query.sort:"newest",n="string"==typeof e.query.category?e.query.category:"",[i,o]=(0,s.useState)({items:[],total:0}),[c,d]=(0,s.useState)(!0),[u,m]=(0,s.useState)([]);return(0,s.useEffect)(()=>{let e=!0;return d(!0),(0,g.t)({q:t,category:n,sort:r,page:1,limit:12}).then(t=>{e&&o(t)}).finally(()=>e&&d(!1)),()=>{e=!1}},[t,n,r]),(0,s.useEffect)(()=>{(async()=>{try{let e=await v();m(e.items||[])}catch(e){}})()},[]),(0,l.jsxs)("section",{className:"container container-padding py-10",children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold",children:"Shop"}),(0,l.jsxs)("div",{className:"mt-6 grid gap-8 lg:grid-cols-[260px_1fr]",children:[(0,l.jsxs)("aside",{className:"rounded-xl border border-neutral-200/70 dark:border-neutral-800 h-fit p-4",children:[(0,l.jsx)("div",{className:"font-semibold",children:"Categories"}),(0,l.jsxs)("ul",{className:"mt-3 space-y-1 text-sm",children:[(0,l.jsx)("li",{children:(0,l.jsx)("a",{href:"/products",className:"block rounded px-2 py-1 ".concat(n?"hover:bg-neutral-50 dark:hover:bg-neutral-900":"bg-neutral-100 dark:bg-neutral-800"),children:"All"})}),u.map(e=>(0,l.jsx)("li",{children:(0,l.jsx)("a",{href:"/products?category=".concat(encodeURIComponent(e.slug)).concat(t?"&q=".concat(encodeURIComponent(t)):"","&sort=").concat(encodeURIComponent(r)),className:"block rounded px-2 py-1 ".concat(n===e.slug?"bg-neutral-100 dark:bg-neutral-800":"hover:bg-neutral-50 dark:hover:bg-neutral-900"),children:e.name})},e.slug))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[(0,l.jsxs)("div",{className:"text-sm text-neutral-500",children:[i.total," results"]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("input",{defaultValue:t,onKeyDown:t=>{if("Enter"===t.key){let r=t.currentTarget.value.trim(),l={...e.query};r?l.q=r:delete l.q,e.push({pathname:"/products",query:l},void 0,{shallow:!0})}},className:"input w-full md:w-64 border rounded-md px-3 py-2 bg-transparent",placeholder:"Search products","aria-label":"Search products"}),(0,l.jsxs)("select",{value:r,onChange:function(t){let r={...e.query,sort:t.target.value};e.push({pathname:"/products",query:r},void 0,{shallow:!0})},className:"border rounded-md px-3 py-2 bg-transparent",children:[(0,l.jsx)("option",{value:"newest",children:"Sort by newest"}),(0,l.jsx)("option",{value:"price_asc",children:"Price: Low to High"}),(0,l.jsx)("option",{value:"price_desc",children:"Price: High to Low"}),(0,l.jsx)("option",{value:"rating_desc",children:"Rating: High to Low"})]})]})]}),(0,l.jsxs)("div",{className:"mt-6 grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[c&&Array.from({length:12}).map((e,t)=>(0,l.jsx)("div",{className:"h-64 rounded-xl border border-neutral-200/70 dark:border-neutral-800 animate-pulse bg-neutral-50 dark:bg-neutral-900"},t)),!c&&i.items.map(e=>(0,l.jsx)(p,{product:e},e.slug))]})]})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8868)}),_N_E=e.O()}]);